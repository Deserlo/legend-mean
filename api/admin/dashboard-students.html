<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Dashboard Students Page</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=1260, initial-scale=1">
    <meta name="theme-color" content="#fff">
    <meta name="format-detection" content="telephone=no">
    <meta name="description" content="Page description">
    <!--Twitter Card data-->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@publisher_handle">
    <meta name="twitter:title" content="Page Title">
    <meta name="twitter:description" content="Page description less than 200 characters">
    <meta name="twitter:creator" content="@author_handle">
    <meta name="twitter:image" content="http://www.example.com/image.jpg">
    <!--Open Graph data-->
    <meta property="og:title" content="Title Here">
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://www.example.com/">
    <meta property="og:image" content="http://example.com/image.jpg">
    <meta property="og:description" content="Description Here">
    <meta property="og:site_name" content="Site Name, i.e. Moz">
    <meta property="fb:admins" content="Facebook numeric ID">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700,700i,900&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../../css/app.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.2/jquery.form.min.js" integrity="sha384-FzT3vTVGXqf7wRfy8k4BiyzvbNfeYjK+frTVqZeNDFl8woCbF0CYG6g2fMEFFo/i" crossorigin="anonymous"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $.getJSON("/admin/students-list", function(data) {
                var content = ""
                $.each(data, function(i, student) {
                    var width = (student.totalAttended / student.totalClasses) * 100
                    console.log(width);
                    content += '<div class="users__item"><div class="users__cell"><div class="users__preview"><img class="users__pic" src="../../img/user.png"></div><div class="users__group">';
                    content += '<div class="users__name">' + student.firstName + ' ' + student.lastName + '</div>';
                    content += '<div class="users__info">' + student.belt + " belt" + '</div> </div> </div>';
                    content += '<div class="users__cell"><div class="users__scale">';
                    content += '<div class="users__progress" style="width:' + width + '%"></div>';
                    content += '<div class="users__counter">' + student.totalAttended + " of " + student.totalClasses + '</div> </div> </div>';
                    content += '<div class="users__cell"><a class="users__btn btn-stroke" href="/user/profile/' + student._id + '"' + '>VIEW PROFILE</a></div>';
                    content += '</div>';
                });
                $(content).appendTo("#students");
            });
        });

      $(document).on('click',".form__btn.btn", function(event) {
        $("#add-student").submit( function(){
        //event.preventDefault();
          $.post($(this).attr('action'), $(this).serialize(), function(student) {
            var content =""
            content += '<form class="form__container" >'
            content += '<div class="form__subtitle">STUDENT ADDED</div>'
            content += '<div class="form__content">You have added <strong>' + student.firstname + " " + student.lastname + '</strong> successfully. Please use the confirmation code below:</div>'
            content += '<div class="form__code">' + student.id + '</div>'
            content += '<div class="form__foot"><button class="form__btn btn" data-fancybox-close>DONE</button></div>'
            content += '</form>'
            $(content).appendTo("#student-added");
            //alert(student.id + " "+ student.firstname + " "+ student.lastname);
            console.log(student.id + " "+ student.firstname + " "+ student.lastname);
          }, 'json');
          this.reset();
          return false;
        });
        $.fancybox.open({ // FancyBox 3
            src: '#student-added'
        });
      });

    $(document).on('click',"a.users__btn.btn-stroke", function(event) {
          var href = $(this).attr('href');
          //alert("href: " + href);
          event.preventDefault();
          $.getJSON(href,function(data) {
              console.log(data);
              var content = "";
              content += '<div class="profile__row">'
              content += '<div class="profile__col">'
              content +=  '<div class="profile__section">'
              content +=  '<div class="profile__users users users_single">'
              content += '<div class="users__preview"><img class="users__pic" src="../../img/user.png"></div>'
              content += '<div class="users__group">'
              content += '<div class="users__name">'+ data._students[0]._stuFirstName +'<span class="users__code"> #XU93HD</span></div>'
              content += '<div class="users__info">' + data._students[0]._belt + '</div>'
              content += '</div></div>'
              content += '<div class="profile__form form form_profile">'
              content +=  '<div class="form__row">'
              content +=  '<div class="form__col">'
              content +=   '<div class="form__field field">'
              content +=  '<div class="field__wrap"><input class="field__input" type="text" placeholder="' + data._students[0]._stuFirstName + '"' + 'required></div>'
              content += '</div></div>'
              content += '<div class="form__col">'
              content += '<div class="form__field field">'
              content += '<div class="field__wrap"><input class="field__input" type="text" placeholder="' + data._students[0]._stuLastName + '"' + 'required></div>'
              content += '</div></div></div>'
              content += '<div class="form__field field">'
              content += '<div class="field__wrap"><input class="field__input" type="date" placeholder="' + data._students[0]._dob + '"' + 'required></div>'
              content += '</div>'
              content += '<div class="form__field field">'
              content += '<div class="field__wrap"><input class="field__input" type="text" placeholder="' + data._students[0]._address + '"' + 'required></div>'
              content += '</div>'
              content += '<div class="form__row">'
              content += '<div class="form__col">'
              content += '<div class="form__field field">'
              content += '<div class="field__wrap"><input class="field__input" type="text" placeholder="' + data._students[0]._contactName + '"' + 'required></div>'
              content += '</div></div>'
              content += '<div class="form__col">'
              content += '<div class="form__field field">'
              content += '<div class="field__wrap"><input class="field__input" type="text" placeholder="' + data._students[0]._contactPhone + '"' + 'required></div>'
              content += '</div></div>'
              content += '</div><button class="form__btn btn-stroke">Save</button>'
              content += '</div></div>'
              content += '<div class="profile__section">'
              content += '<div class="profile__title">Promote</div>'
              content += '<div class="profile__form form form_profile">'
              content += '<div class="form__field field">'
              content += '<div class="field__wrap">'
              content += '<div class="select js-select">'
              content += '<div class="select__head js-select-head">Belt</div>'
              content += '<div class="select__dropdown"><a class="select__option js-select-option" href="#">White</a><a class="select__option js-select-option" href="#">White-Black</a><a class="select__option js-select-option" href="#">Yellow</a><a class="select__option js-select-option"'
              content += '<a href="#">Yellow-Black</a><a class="select__option js-select-option" href="#">Orange</a><a class="select__option js-select-option" href="#">Orange-Black</a><a class="select__option js-select-option" href="#">Purple</a>'
              content += '<a class="select__option js-select-option" href="#">Purple-White</a><a class="select__option js-select-option" href="#">Green</a><a class="select__option js-select-option" href="#">Green-White</a><a class="select__option js-select-option" href="#">Blue</a>'
              content += '<a class="select__option js-select-option" href="#">Blue-White</a><a class="select__option js-select-option" href="#">Blue-Black</a><a class="select__option js-select-option" href="#">Red</a><a class="select__option js-select-option" href="#">Red-White</a>'
              content +=  '<a class="select__option js-select-option" href="#">Red-Black</a><a class="select__option js-select-option" href="#">Brown</a><a class="select__option js-select-option" href="#">Brown-Black</a><a class="select__option js-select-option" href="#">Black</a></div>'
              content += '<input class="select__input js-select-input" type="hidden">'
              content += '</div>'
              content += '</div></div>'
              content += '<div class="form__row">'
              content += '<div class="form__col form__col_lg">'
              content += '<div class="form__field field">'
              content += '<div class="field__wrap">'
              content += '<div class="select js-select">'
              content += '<div class="select__head js-select-head">BBC</div>'
              content += '<div class="select__dropdown"><a class="select__option js-select-option" href="#">Acrobatics I</a><a class="select__option js-select-option" href="#">Acrobatics II</a><a class="select__option js-select-option" href="#">Weapon I</a>'
              content += '<a class="select__option js-select-option" href="#">Weapon II</a><a class="select__option js-select-option" href="#">Weapon III</a></div><input class="select__input js-select-input" type="hidden">'
              content += '</div></div></div></div>'
              content += '<div class="form__col form__col_auto"><label class="form__checkbox checkbox"><input class="checkbox__input" type="checkbox" checked><span class="checkbox__content">Leadership</span></label></div>'
              content += '<div class="form__col form__col_auto"><label class="form__checkbox checkbox"><input class="checkbox__input" type="checkbox"><span class="checkbox__content">Competition</span></label></div>'
              content += '</div></div><button class="form__btn btn-stroke">Save</button>'
              content += '</div>'
              content += '</div>'
              content += '<div class="profile__col">'
              content += '<div class="profile__section">'
              content += '<div class="profile__title">Notes</div>'
              content += '<div class="profile__form form form_profile">'
              content += '<div class="form__field field">'
              content += '<div class="field__wrap"><textarea class="field__area field__area_sm" placeholder="Public Notes" required></textarea></div>'
              content += '</div>'
              content += '<div class="form__field field">'
              content += '<div class="field__wrap"><textarea class="field__area field__area_sm" placeholder="Private Notes" required></textarea></div>'
              content += '</div><button class="form__btn btn-stroke">Save</button>'
              content += '</div>'
              content += '</div>'
              content += '</div>'
              content += '</div>'
              content += '</div>'
              $("#profile").empty();
              $(content).appendTo("#profile");
            });
            $.fancybox.open({ // FancyBox 3
                src: '#profile'
            });

        });
        </script>
</head>
<body>
    <div class="page">
        <header class="header">
            <div class="header__center center">
                <a class="header__logo" href="#"><img class="header__pic" src="../../img/legend.svg" width="180"></a>
                <nav class="header__nav"><a class="header__link active" href="/">Home</a><a class="header__link" href="#">Programs</a><a class="header__link" href="/register">Register</a><a class="header__link" href="/login">Login</a></nav><a class="header__btn btn btn_white"
                    href="/contact-us">CONTACT US</a>
            </div>
        </header>
        <div class="container">
            <div class="dashboard">
                <div class="dashboard__center center">
                    <div class="dashboard__head">
                        <div class="dashboard__nav"><a class="dashboard__link active" href="/admin/students">Students</a><a class="dashboard__link" href="/admin/class">Classes</a></div><button class="dashboard__add" data-fancybox data-src="#add-student"><img class="dashboard__icon" src="../../img/add.svg"></button>
                    </div>
                    <div class="dashboard__body">
                        <div class="users" id="students">
                            <!--content gets appended here-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="form form_modal">
                <form class="form__container" method="post" id="add-student" action="/admin/students">
                    <div class="form__title title">ADD STUDENT</div>
                    <div class="form__row">
                        <div class="form__col">
                            <div class="form__field field">
                                <div class="field__wrap"><input class="field__input" type="text" name="firstname" placeholder=" First Name" required></div>
                            </div>
                        </div>
                        <div class="form__col">
                            <div class="form__field field">
                                <div class="field__wrap"><input class="field__input" type="text" name="lastname" placeholder="Last Name" required></div>
                            </div>
                        </div>
                    </div>
                    <div class="form__field field">
                        <div class="field__wrap"><input class="field__input" type="date" name="dob" placeholder="DOB" required></div>
                    </div>
                    <div class="form__field field">
                        <div class="field__wrap"><input class="field__input" type="text" name="address" placeholder="Address" required></div>
                    </div>
                    <div class="form__row">
                        <div class="form__col">
                            <div class="form__field field">
                                <div class="field__wrap"><input class="field__input" type="text" name="contactName" placeholder="Emergency Contact" required></div>
                            </div>
                        </div>
                        <div class="form__col">
                            <div class="form__field field">
                                <div class="field__wrap"><input class="field__input" type="text" name="contactPhone" placeholder="Phone Number" required></div>
                            </div>
                        </div>
                    </div>
                    <div class="form__field field">
                        <div class="field__wrap">
                            <div class="select js-select">
                                <div class="select__head js-select-head">Belt</div>
                                <div class="select__dropdown"><a class="select__option js-select-option" href="#">White</a>
                                  <a class="select__option js-select-option" href="#">White+</a>
                                    <a class="select__option js-select-option" href="#">White</a>
                                    <a class="select__option js-select-option" href="#">Yellow</a>
                                    <a class="select__option js-select-option" href="#">Yellow-Black</a>
                                    <a class="select__option js-select-option" href="#">Orange</a>
                                    <a class="select__option js-select-option" href="#">Orange-Black</a>
                                    <a class="select__option js-select-option" href="#">Purple</a>
                                    <a class="select__option js-select-option" href="#">Purple-White</a>
                                    <a class="select__option js-select-option" href="#">Green</a>
                                    <a class="select__option js-select-option" href="#">Green-White</a>
                                    <a class="select__option js-select-option" href="#">Blue</a>
                                    <a class="select__option js-select-option" href="#">Blue-White</a>
                                    <a class="select__option js-select-option" href="#">Blue-Black</a>
                                    <a class="select__option js-select-option" href="#">Red</a>
                                    <a class="select__option js-select-option" href="#">Red-White</a>
                                    <a class="select__option js-select-option" href="#">Red-Black</a>
                                    <a class="select__option js-select-option" href="#">Brown</a>
                                    <a class="select__option js-select-option" href="#">Brown-Black</a>
                                    <a class="select__option js-select-option" href="#">Black</a>
                                </div><input class="select__input js-select-input" name="belt" type="hidden">
                            </div>
                        </div>
                    </div>
                    <div class="form__foot"><button class="form__btn btn">SUBMIT</button></div>
                    <!--<div class="form__foot"><button class="form__btn btn" type="submit" data-fancybox data-src="#student-added">SUBMIT</button></div>-->
                </form>
            </div>
            <div class="form form_modal" id="student-added"></div>
            <div class="profile" id="profile" style="display: none"></div>
        <footer class="footer">
            <div class="footer__center center">
                <div class="footer__row">
                    <div class="footer__col">
                        <a class="footer__logo" href="#"><img class="footer__pic" src="../../img/legend.svg" width="180"></a>
                        <div class="footer__content">
                            <p>9081 Foothills Blvd. ste.100</p>
                            <p>Roseville CA 95747</p><br>
                            <p><a href="tel:9167802002">(916) 780 - 2002</a></p>
                        </div>
                    </div>
                    <div class="footer__col">
                        <div class="footer__content">
                            <p><strong>Studio Hours</strong></p>
                            <p>Mon/Wed 10am - 8:30pm</p>
                            <p>Tue/Thu 10am - 8pm</p>
                            <p>Fri 10:30 - 8pm</p>
                            <p>Sat 10am - 2pm</p>
                            <p>Sun Closed</p>
                        </div>
                    </div>
                    <div class="footer__col">
                        <nav class="footer__nav"><a class="footer__link" href="#">Home</a><a class="footer__link" href="#">Programs</a><a class="footer__link" href="#">Register</a><a class="footer__link" href="#">Login</a><a class="footer__link" href="#">Contact Us</a></nav>
                        <div class="footer__socials">
                            <a class="footer__social" href="#"><img class="footer__pic" src="../../img/facebook-white.svg" width="24"></a>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    <script type="text/javascript" src="../../js/app.js"></script>
</body>

</html>
